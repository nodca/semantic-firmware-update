

python generate.py old.json new.json RTOSDemo2.bin RTOSDemoDiff2.bin patch.bin

python generate2.py old.json new.json RTOSDemo2.bin RTOSDemoDiff2.bin patch2.bin

python generate.py --old RTOSDemo.bin --new RTOSDemoDiff.bin --old-sym old.json --new-sym new.json --out generate.bin

生成json:
python dump.py old.txt --out old.json
生成json:
python dump.py new.txt --out new.json 
生成txt:
ielfdumparm.exe --all RTOSDemoDiff.out > new.txt 

固定块:
python generate.py gen --old RTOSDemo.bin --new RTOSDemoDiff.bin --out generate.bin --compress none

用json:
python generate.py gen --old RTOSDemo.bin --new RTOSDemoDiff.bin --old-sym old.json --new-sym new.json --out generate.bin --compress none


写出重建固件：
python apply_patch.py --old RTOSDemo.bin --patch generate.bin --out reconstructed.bin --payload 502
验证补丁：
python apply_patch.py --old RTOSDemo.bin --patch generate.bin --expect RTOSDemoDiff.bin --payload 502

map:
python generate.py gen --old RTOSDemo.bin --new RTOSDemoDiff.bin --old-map old.map --new-map new.map --flash-base 0x08000000 --out generate.bin

两种源：
python -m generator.generate gen --old RTOSDemo.bin --new RTOSDemoDiff.bin --old-map old.map --new-map new.map --old-sym old.json --new-sym new.json --flash-base 0x08000000 --out generate.bin

CDC：
python -m generator.generate gen --old RTOSDemo.bin --new RTOSDemoDiff.bin --old-map old.map --new-map new.map --old-sym old.json --new-sym new.json --flash-base 0x08000000 --out generate.bin --cdc

reloc：
python -m generator.generate gen --old RTOSDemo.bin --new RTOSDemoDiff.bin --old-map old.map --new-map new.map --old-sym .\build\old.json --new-sym .\build\new.json --flash-base 0x08000000 --out generate.bin --cdc --arch-mode thumb --reloc-aware --reloc-th 0.5 --verify

合成基准测试：
python -m generator.tools.synthsuite --out .\synth_base --arch thumb --scenario base

python -m generator.generate gen --old .\synth_base\old.bin --new .\synth_base\new.bin --old-sym .\synth_base\old.json --new-sym .\synth_base\new.json --flash-base 0x08000000 --out patch_base.bin --cdc --arch-mode thumb --reloc-aware --reloc-th 0.5 --verify

python apply_patch.py --old old.bin --patch patch_base.bin --expect new.bin --payload 502

python apply_patch.py --old old.bin --patch patch_base.bin --out restruct2.bin --payload 502

函数重排测试：
python -m generator.tools.synthsuite --out .\synth_reorder --arch thumb --scenario reorder

python -m generator.generate gen --old .\synth_reorder\old.bin --new .\synth_reorder\new.bin --old-sym .\synth_reorder\old.json --new-sym .\synth_reorder\new.json --flash-base 0x08000000 --out patch_reorder.bin --cdc --arch-mode thumb --reloc-aware --reloc-th 0.5 --verify

python apply_patch.py --old .\synth_reorder\old.bin --patch patch_reorder.bin --expect .\synth_reorder\new.bin --payload 502


python -m generator.tools.iar_dump2json .\build\Project.out --out .\build\Project.json --addr-min 0x08000000 --addr-max 0x08FFFFFF

python -m generator.generate gen --old .\synth_mix\old.bin --new .\synth_mix\new.bin --old-sym .\synth_mix\old.json --new-sym .\synth_mix\new.json --flash-base 0x08000000 --out patch_mix.bin --cdc --arch-mode thumb --reloc-aware --reloc-th 0.5 --verify

python -m generator.tools.synthsuite --out .\synth_mix --target-bytes 535520 --arch thumb --scenario mix --seed 123  

TMS570：加 --endian be

python -m generator.generate gen --old USBD_CDC.bin --new USBD_CDC2.bin --old-sym USBD_CDC.json --new-sym USBD_CDC2.json --flash-base 0x08000000 --out patch_USBD.bin --cdc --arch-mode arm --reloc-aware --reloc-th 0.5 --verify

python -m generator.tools.iar_dump2json STM324x9I-EVAL_USBD-FS.out --out USBD_CDC.json --addr-min 0x08000000 --addr-max 0x08FFFFFF

python analyze_copy_efficiency.py patch_USBD.bin USBD_CDC.bin USBD_CDC2.bin

python -m generator.tools.iar_dump2json QLS01CDHS224.out --out QLS01CDHS224.json --addr-min 0x00000000 --addr-max 0x08040000

python -m generator.tools.iar_dump2json QLS01CDHS225.out --out QLS01CDHS225.json --addr-min 0x00000000 --addr-max 0x08040000

python -m generator.generate gen --old QLS01CDHS224.bin --new QLS01CDHS225.bin  --old-sym QLS01CDHS224.json --new-sym QLS01CDHS225.json  --flash-base 0x00000000 --out QLS01CDHSpatch.bin --cdc --arch-mode arm --endian be --reloc-aware --reloc-th 0.5 --verify

python -m generator.generate gen --old QLS01CDHS224.bin --new QLS01CDHS225.bin  --old-sym QLS01CDHS224.json --new-sym QLS01CDHS225.json  --flash-base 0x00000000 --out QLS01CDHSpatch.bin --cdc --arch-mode thumb --reloc-aware --reloc-th 0.5 --verify


  python -m generator.ir.arm_ir --old-bin QLS01CDHS224.bin --new-bin QLS01CDHS225.bin --old-json QLS01CDHS224.json --new-json QLS01CDHS225.json --old-txt QLS01CDHS224.txt --new-txt QLS01CDHS225.txt --flash-base 0x0 --section "P2 ro" --min-match-len 16

  python -m generator.tools.patch_sim 
  --old QLS01CDHS224.bin 
  --patch QLS01CDHSpatch.bin 
  --new QLS01CDHS225.bin 
  --payload 502 
  --scale 50

  python -m generator.tools.analyze_new_repeats 
  --old QLS01CDHS224.bin 
  --new QLS01CDHS225.bin 
  --block-sizes 16,32,64
  --step 4

    python -m generator.tools.analyze_new_repeats 
  --old USBD_CDC.bin 
  --new USBD_CDC2.bin 
  --block-sizes 16,32,64
  --step 4